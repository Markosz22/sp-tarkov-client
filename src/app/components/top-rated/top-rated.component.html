<mat-card *ngFor="let mod of accumulatedModList" appIsAlreadyInstalled #alreadyInstalled="isAlreadyInstalled" [mod]="mod">
  <mat-card-content class="card-container">
    <img *ngIf="mod.image" class="image-shadow" [ngSrc]="mod.image" height="144" width="144" alt="">
    <span *ngIf="mod.icon" [className]="'mod-icon ' + 'fa ' + mod.icon"></span>
    <div class="mod-list-container">
      <strong class="mod-name one-line-clamp">{{ mod.name }}</strong>
      <div class="mod-teaser">{{ mod.teaser }}</div>
      <span class="spacer"></span>
      <div style="display: flex">
        @if (isActiveAkiInstanceAvailable()) {
          @if (alreadyInstalled.isAlreadyInstalled()) {
            <mat-icon
              matTooltip="Already installed"
              style="display: flex; justify-content: center; align-items: center; height: 48px; width: 48px;margin: unset"
              color="accent">done_all
            </mat-icon>
          } @else {
            @if (!alreadyInstalled.isInModList()) {
              <button mat-icon-button (click)="addModToModList(mod)">
                <mat-icon>add</mat-icon>
              </button>
            } @else {
              <button mat-icon-button (click)="removeModFromModList(mod)">
                <mat-icon>delete</mat-icon>
              </button>
            }
          }
        } @else {
          <mat-icon style="display: flex; justify-content: center; align-items: center; height: 48px; width: 48px" color="warn" matTooltip="Add or activate an instance of SPT to enable download functionality">warning</mat-icon>
        }
        <button mat-icon-button (click)="openExternal(mod.fileUrl)" matTooltip="Open external">
          <mat-icon>open_in_new</mat-icon>
        </button>
      </div>
    </div>
  </mat-card-content>
</mat-card>
